/* Weather Render - Using TelemetryOS Design Tokens */

.weather-render {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  font-family: var(--font-family-base);
  color: var(--color-text);
  background: var(--color-background);
  /* Enable container queries */
  container-type: size;
  container-name: weather-zone;
}

/* Light theme overrides are handled by tokens.css variables */

.weather-background {
  position: absolute;
  inset: 0;
  z-index: 0;
  transition: opacity var(--transition-base);
}

.weather-content {
  position: relative;

  z-index: 1;
  width: 100%;
  height: 100%;
  padding: clamp(4.5rem, 4%, 2.5rem);
  gap: clamp(1rem, 2vh, 2rem);
  column-gap: clamp(2rem, 5vw, 4rem);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

/* Header */
.weather-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.location-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.location-name {
  font-size: clamp(1.5rem, 3.5vw, 2.5rem);
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
}

.current-time-container {
  display: flex;
  gap: 0.25rem;
}

.current-date {
  font-size: clamp(0.75rem, 1.5vw, 1rem);
  color: var(--color-text-muted);
  align-self: end;
}

.current-time {
  font-size: clamp(1.25rem, 2.5vw, 2rem);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  line-height: 1;
}

.weather-content-body {
  display: flex;
  justify-content: space-between;
  gap: clamp(1rem, 2vh, 2rem);
}

/* Main Weather Display - Left Side */
.weather-main {
  grid-column: 1;
  grid-row: 2;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  gap: clamp(0.5rem, 1.5vh, 1rem);
  padding-top: clamp(1rem, 3vh, 2rem);
}

.weather-icon {
  font-size: clamp(3rem, 8vw, 6rem);
  line-height: 1;
  opacity: 0.9;
}

.condition {
  font-size: clamp(1rem, 2.5vw, 1.5rem);
  font-weight: var(--font-weight-normal);
  text-transform: capitalize;
  color: var(--color-text-muted);
  order: 2;
}

.temperature {
  font-size: clamp(5rem, 15vw, 12rem);
  font-weight: var(--font-weight-bold);
  line-height: 0.85;
  color: var(--color-error);
  letter-spacing: -0.02em;
  order: 1;
}

.feels-like {
  font-size: clamp(0.875rem, 2vw, 1.25rem);
  color: var(--color-text-muted);
  order: 3;
}

/* Weather Details - Right Side */
.weather-details-panel {
  display: flex;
  align-self: end;
}

.weather-details-panel-body {
  display: flex;
  gap: clamp(1.5rem, 3vh, 2.5rem);
}

.detail-item {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.detail-label {
  font-size: clamp(0.75rem, 1.5vw, 1rem);
  color: var(--color-text-muted);
  text-transform: uppercase;
  font-weight: var(--font-weight-semibold);
  letter-spacing: 0.1em;
}

.detail-value {
  font-size: clamp(1.5rem, 3.5vw, 2.5rem);
  color: var(--color-error);
  font-weight: var(--font-weight-bold);
  line-height: 1;
}

/* Forecast */
.forecast-container {
  width: 100%;
}

.forecast-title {
  font-size: clamp(0.75rem, 1.5vw, 1rem);
  font-weight: var(--font-weight-semibold);
  text-align: left;
  margin-bottom: clamp(0.25rem, 0.5vh, 0.5rem);
  color: var(--color-text-muted);
}

.forecast-daily,
.forecast-hourly {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
  gap: clamp(0.5rem, 1.5vw, 1rem);
  padding: 0.25rem 0;
}

.forecast-day,
.forecast-hour {
  display: flex;
  align-items: center;
  justify-content: space-around;
  gap: clamp(0.375rem, 1vh, 0.625rem);
  padding: clamp(0.75rem, 2vw, 1.25rem) clamp(0.625rem, 1.5vw, 1rem);
  background: var(--color-surface);
  backdrop-filter: blur(10px);
  border-radius: 0.1rem;
  border: var(--border-width) solid var(--color-border);
  transition: all var(--transition-base);
}

.forecast-day:hover,
.forecast-hour:hover {
  background: var(--color-surface-raised);
  transform: translateY(-2px);
}

.forecast-day-name,
.forecast-time {
  font-size: clamp(0.625rem, 1.5vw, 0.875rem);
  font-weight: var(--font-weight-medium);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-muted);
}

.forecast-icon {
  font-size: clamp(2rem, 5vw, 3rem);
  line-height: 1;
  margin: clamp(0.25rem, 0.5vh, 0.5rem) 0;
}

.forecast-high,
.forecast-temp {
  font-size: clamp(1rem, 2.5vw, 1.5rem);
  font-weight: var(--font-weight-bold);
  color: var(--color-text);
}

.forecast-low {
  font-size: clamp(0.75rem, 1.75vw, 1.125rem);
  color: var(--color-text-muted);
}

/* Updated time indicator */
.updated-time {
  text-align: left;
  font-size: clamp(0.625rem, 1.25vw, 0.875rem);
  color: var(--color-text-muted);
  opacity: 0.7;
  margin-top: clamp(0.375rem, 0.75vh, 0.625rem);
}

/* Empty State */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: clamp(1rem, 3vh, 2rem);
  text-align: center;
  padding: clamp(1rem, 5%, 2rem);
}

.empty-icon {
  font-size: clamp(3rem, 8vw, 5rem);
  opacity: 0.6;
}

.empty-title {
  font-size: clamp(1.25rem, 3vw, 2rem);
  font-weight: var(--font-weight-bold);
  margin: 0;
  color: var(--color-text);
}

.empty-message {
  font-size: clamp(0.875rem, 2vw, 1.25rem);
  color: var(--color-text-muted);
  max-width: 30rem;
  margin: 0;
  line-height: var(--line-height-base);
}

/* Loading State */
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: clamp(0.75rem, 2vh, 1.5rem);
}

.loading-spinner {
  width: clamp(2.5rem, 6vw, 4rem);
  height: clamp(2.5rem, 6vw, 4rem);
  border: 4px solid var(--color-border-subtle);
  border-top-color: var(--color-accent);
  border-radius: var(--radius-full);
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loading-text {
  font-size: clamp(0.875rem, 2vw, 1.25rem);
  color: var(--color-text);
  font-weight: var(--font-weight-medium);
}

.loading-location {
  font-size: clamp(0.75rem, 1.5vw, 1rem);
  color: var(--color-text-muted);
}

/* Error State */
.error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: clamp(0.75rem, 2vh, 1.5rem);
  text-align: center;
  padding: clamp(1rem, 5%, 2rem);
}

.error-icon {
  font-size: clamp(2.5rem, 6vw, 4rem);
  opacity: 0.8;
}

.error-title {
  font-size: clamp(1rem, 2.5vw, 1.5rem);
  font-weight: var(--font-weight-bold);
  margin: 0;
  color: var(--color-error);
}

.error-message {
  font-size: clamp(0.875rem, 1.75vw, 1.125rem);
  color: var(--color-text-muted);
  max-width: 30rem;
  margin: 0;
  line-height: var(--line-height-base);
}

.error-retry-button {
  height: clamp(2rem, 5vh, 2.5rem);
  padding: clamp(0.5rem, 1.5vw, 1rem) clamp(1rem, 2.5vw, 1.5rem);
  background: var(--color-accent);
  color: var(--color-background);
  border: none;
  border-radius: var(--radius-sm);
  font-size: clamp(0.875rem, 1.75vw, 1.125rem);
  font-weight: var(--font-weight-semibold);
  font-family: inherit;
  cursor: pointer;
  transition: all var(--transition-base);
  margin-top: clamp(0.5rem, 1vh, 1rem);
}

.error-retry-button:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.error-retry-button:active {
  transform: translateY(0);
}

/* Content Priority - Responsive Behavior */
.p1 {
  display: block;
}
.p2 {
  display: block;
}
.p3 {
  display: block;
}

/* ============================================
   ZONE SHAPE RESPONSIVE DESIGN
   Using CSS Container Queries with Aspect Ratio
   ============================================ */

/* SQUARE ZONE (0.75 - 1.33 aspect ratio)
   Dashboard tiles, widgets - balanced layout
   PRIORITY: Main temp + some details */
@container weather-zone (aspect-ratio >= 0.75) and (aspect-ratio <= 1.33) {
  .weather-content {
    padding: clamp(1.5rem, 3%, 2rem);
    gap: clamp(0.75rem, 1.5vh, 1.5rem);
  }

  .weather-content-body {
    flex-direction: column;
    gap: clamp(1rem, 2vh, 1.5rem);
  }

  .weather-main {
    padding-top: 0;
    gap: clamp(0.5rem, 1vh, 0.75rem);
  }

  /* P1: Main temperature and condition - ALWAYS SHOW */
  .temperature {
    font-size: clamp(4rem, 12vw, 8rem);
  }

  .weather-icon {
    font-size: clamp(4rem, 10vw, 6rem);
  }

  .condition {
    font-size: clamp(1rem, 2vw, 1.25rem);
  }

  .location-name {
    font-size: clamp(1.25rem, 2.5vw, 1.75rem);
  }

  .current-time {
    font-size: clamp(2rem, 3vw, 2.5rem);
  }

  .current-date {
    font-size: clamp(0.875rem, 1.5vw, 1rem);
  }

  /* P2: Show details panel with reduced items */
  .weather-details-panel-body {
    flex-direction: row;
    gap: clamp(1rem, 2vw, 1.5rem);
  }

  .detail-label {
    font-size: clamp(0.75rem, 1.25vw, 0.875rem);
  }

  .detail-value {
    font-size: clamp(1.5rem, 2.5vw, 2rem);
  }

  /* P3: Show forecast but limit to 3 days/hours */
  .forecast-daily .forecast-day:nth-child(n + 4),
  .forecast-hourly .forecast-hour:nth-child(n + 4) {
    display: none;
  }

  .forecast-daily,
  .forecast-hourly {
    gap: clamp(0.375rem, 1vw, 0.75rem);
  }

  .forecast-day,
  .forecast-hour {
    padding: clamp(0.5rem, 1.5vw, 0.875rem) clamp(0.5rem, 1vw, 0.75rem);
  }
}

/* TALL RECTANGLE ZONE (0.33 - 0.75 aspect ratio)
   Sidebar-style - Focus on big temperature, minimal details
   PRIORITY: Temperature + location + minimal details */
@container weather-zone (aspect-ratio < 0.75) and (aspect-ratio >= 0.33) {
  .weather-content {
    padding: clamp(1rem, 2%, 1.5rem);
    gap: clamp(0.75rem, 1.5vh, 1.25rem);
  }

  .weather-content-body {
    flex-direction: column;
    gap: clamp(0.75rem, 1.5vh, 1rem);
  }

  .weather-main {
    padding-top: 0;
    gap: clamp(0.375rem, 0.75vh, 0.5rem);
    align-items: center;
    text-align: center;
  }

  /* P1: Emphasized temperature and condition */
  .temperature {
    font-size: clamp(3.5rem, 12vw, 7rem);
  }

  .weather-icon {
    font-size: clamp(3rem, 10vw, 6rem);
  }

  .condition {
    font-size: clamp(0.875rem, 2.5vw, 1.25rem);
  }

  .location-name {
    font-size: clamp(1rem, 3vw, 1.75rem);
  }

  .current-time {
    font-size: clamp(1.5rem, 3.5vw, 2.25rem);
  }

  .current-date {
    font-size: clamp(0.75rem, 1.75vw, 1rem);
  }

  /* P2: Hide "feels like" in WeatherCurrent, show only details panel */
  .feels-like {
    display: none;
  }

  .weather-details-panel {
    align-self: center;
  }

  .weather-details-panel-body {
    flex-direction: column;
    gap: clamp(0.75rem, 1.5vh, 1rem);
    align-items: center;
  }

  .detail-item {
    text-align: center;
  }

  .detail-label {
    font-size: clamp(0.625rem, 1.5vw, 0.875rem);
  }

  .detail-value {
    font-size: clamp(1.25rem, 3vw, 2rem);
  }

  /* P3: Show only 3 forecast items */
  .forecast-daily .forecast-day:nth-child(n + 4),
  .forecast-hourly .forecast-hour:nth-child(n + 4) {
    display: none;
  }

  .forecast-daily,
  .forecast-hourly {
    gap: clamp(0.25rem, 0.75vw, 0.5rem);
  }

  .forecast-day,
  .forecast-hour {
    padding: clamp(0.375rem, 1vw, 0.625rem) clamp(0.375rem, 0.75vw, 0.5rem);
  }

  .forecast-day-name,
  .forecast-time {
    font-size: clamp(0.5rem, 5vh, 2rem);
  }

  .forecast-high,
  .forecast-temp {
    font-size: clamp(0.875rem, 2vw, 1.25rem);
  }
}

@container weather-zone (aspect-ratio > 1.33) and (aspect-ratio <= 3.0) {
  /* Wide Rectangle (1.33 - 3.0)
     Full-screen 16:9, horizontal layout - Show ALL details + full forecast
     PRIORITY: Everything (P1 + P2 + P3)
     Gradual decrease: fonts are larger at 1.33, smaller at 3.0 */
  .weather-content {
    padding: clamp(1rem, 2%, 2.5rem);
    gap: clamp(0.5rem, 1vh, 1.5rem);
  }

  .weather-content-body {
    flex-direction: row;
    gap: clamp(1rem, 2vw, 2.5rem);
  }

  /* P1: Temperature - gradual decrease from large to medium */
  .temperature {
    font-size: clamp(3.5rem, 24vh, 15rem);
  }

  .weather-icon {
    font-size: clamp(2.5rem, 35vh, 20rem);
  }

  .condition {
    font-size: clamp(0.875rem, 4vh, 2rem);
  }

  .location-name {
    font-size: clamp(1rem, 10vh, 4rem);
  }

  .current-time {
    font-size: clamp(1.25rem, 8vh, 3.5rem);
  }

  .current-date {
    font-size: clamp(0.75rem, 4vh, 2rem);
  }

  .feels-like {
    font-size: clamp(0.875rem, 3vh, 1.8rem);
  }

  /* P2: Details panel - gradual decrease */
  .weather-details-panel-body {
    flex-direction: row;
    gap: clamp(1rem, 2vw, 2rem);
  }

  .detail-label {
    font-size: clamp(0.75rem, 10vh, 2rem);
  }

  .detail-value {
    font-size: clamp(1.5rem, 20vh, 3rem);
  }

  /* P3: Forecast - gradual decrease */
  .forecast-daily,
  .forecast-hourly {
    gap: clamp(0.375rem, 0.75vw, 0.875rem);
  }

  .forecast-day,
  .forecast-hour {
    padding: clamp(0.5rem, 1vw, 0.875rem) clamp(0.375rem, 0.75vw, 0.75rem);
  }

  .forecast-icon {
    font-size: clamp(1.75rem, 10vh, 4rem);
  }

  .forecast-day-name,
  .forecast-time {
    font-size: clamp(0.5rem, 5vh, 2rem);
  }

  .forecast-high,
  .forecast-temp {
    font-size: clamp(0.5rem, 5vh, 2rem);
  }

  .forecast-low {
    font-size: clamp(0.75rem, 1.25vw, 1rem);
  }
}

/* EXTREME ZONE (< 0.33 or > 3.0 aspect ratio)
   Ticker strips, skyscrapers - minimal content, horizontal/vertical layouts */
@container weather-zone (aspect-ratio < 0.33) {
  /* Extreme Tall (Skyscraper)
     Minimal content - Temperature + location only
     PRIORITY: P1 only (hide P2 and P3) */
  .weather-content {
    padding: clamp(1rem, 2%, 1.5rem);
    gap: clamp(1rem, 2vh, 2rem);
    justify-content: center;
  }

  /* P2: Hide details panel */
  .weather-details-panel {
    display: none;
  }

  /* P3: Hide forecast */
  .forecast-container {
    display: none;
  }

  .weather-header {
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: clamp(0.5rem, 1vh, 0.75rem);
  }

  .location-info {
    align-items: center;
  }

  .weather-content-body {
    flex-direction: column;
    align-items: center;
    gap: clamp(1.5rem, 3vh, 2.5rem);
  }

  .weather-main {
    padding-top: 0;
    gap: clamp(0.5rem, 1vh, 0.75rem);
    align-items: center;
    text-align: center;
  }

  /* P1: Big, bold temperature */
  .temperature {
    font-size: clamp(3.5rem, 15vw, 6rem);
  }

  .weather-icon {
    font-size: clamp(3rem, 12vw, 5rem);
    order: -1;
  }

  .condition {
    font-size: clamp(0.875rem, 3.5vw, 1.25rem);
  }

  /* P2: Hide "feels like" */
  .feels-like {
    display: none;
  }

  .location-name {
    font-size: clamp(1rem, 4vw, 1.5rem);
  }

  .current-time {
    font-size: clamp(1.5rem, 5vw, 2rem);
  }

  .current-date {
    font-size: clamp(0.75rem, 2.5vw, 1rem);
  }

  .current-time-container {
    flex-direction: column;
    align-items: center;
    gap: 0.125rem;
  }
}

@container weather-zone (aspect-ratio > 3.0) {
  /* Extreme Wide (Ticker Strip)
     Minimal horizontal layout - Temperature + location + forecast slider
     PRIORITY: P1 only (hide P2, show one forecast card at a time)
     Using vh units since height is the limiting dimension */
  .weather-content {
    padding: clamp(1rem, 4vh, 4rem);
    gap: clamp(1rem, 4vh, 3rem);
    flex-direction: row;
    align-items: center;
    justify-content: space-around;
  }

  /* P2: Hide details panel */
  .weather-details-panel {
    display: none;
  }

  .weather-header {
    flex-shrink: 0;
    min-width: fit-content;
  }

  .location-name {
    font-size: clamp(2rem, 8vh, 6rem);
  }

  .current-time {
    font-size: clamp(3rem, 12vh, 8rem);
  }

  .current-date {
    font-size: clamp(1.5rem, 5vh, 3rem);
  }

  .weather-content-body {
    justify-content: center;
  }

  .weather-main {
    flex-direction: row;
    align-items: center;
    gap: clamp(2rem, 12vh, 6rem);
    padding-top: 0;
  }

  /* P1: Temperature only (hide condition) */
  .temperature {
    font-size: clamp(6rem, 36vh, 24rem);
    line-height: 1;
  }

  .weather-icon {
    font-size: clamp(6rem, 30vh, 20rem);
  }

  .condition {
    display: none;
  }

  /* P2: Hide "feels like" */
  .feels-like {
    display: none;
  }

  /* P3: Show forecast as vertical slider - one card at a time */
  .forecast-container {
    display: flex;
    flex-shrink: 0;
    min-width: fit-content;
    overflow: hidden;
    height: 100%;
    align-items: center;
  }

  .forecast-daily,
  .forecast-hourly {
    width: 22vw;
    display: flex;
    flex-direction: column;
    gap: 0;
    position: relative;
    height: clamp(8rem, 40vh, 16rem);
    overflow: hidden;
  }

  .forecast-day,
  .forecast-hour {
    display: flex;
    width: 100%;
    height: 100%;
    align-items: center;
    justify-content: space-around;
    background: var(--color-background);
    border: none;
    animation: slideVertical 6s ease-in-out infinite;
    position: absolute;
    opacity: 0;
    transform: translateY(100%);
  }

  /* Show cards one at a time with staggered animation */
  .forecast-day:nth-child(1),
  .forecast-hour:nth-child(1) {
    animation-delay: 0s;
  }

  .forecast-day:nth-child(2),
  .forecast-hour:nth-child(2) {
    animation-delay: 6s;
  }

  .forecast-day:nth-child(3),
  .forecast-hour:nth-child(3) {
    animation-delay: 12s;
  }

  .forecast-day:nth-child(4),
  .forecast-hour:nth-child(4) {
    animation-delay: 18s;
  }

  .forecast-day:nth-child(5),
  .forecast-hour:nth-child(5) {
    animation-delay: 24s;
  }

  .forecast-day:nth-child(6),
  .forecast-hour:nth-child(6) {
    animation-delay: 30s;
  }

  .forecast-day:nth-child(7),
  .forecast-hour:nth-child(7) {
    animation-delay: 36s;
  }

  .forecast-icon {
    font-size: clamp(3rem, 20vh, 20rem);
  }

  .forecast-day-name,
  .forecast-time {
    font-size: clamp(1rem, 10vh, 10rem);
    font-weight: var(--font-weight-semibold);
  }

  .forecast-high,
  .forecast-temp {
    font-size: clamp(2rem, 16vh, 16rem);
    font-weight: var(--font-weight-bold);
  }

  .forecast-low {
    font-size: clamp(1.5rem, 12vh, 6rem);
  }
}

/* Vertical slide animation for forecast cards */
@keyframes slideVertical {
  0% {
    opacity: 0;
    transform: translateY(100%);
  }
  5% {
    opacity: 1;
    transform: translateY(0);
  }
  60% {
    opacity: 1;
    transform: translateY(0);
  }
  70% {
    opacity: 0;
    transform: translateY(-100%);
  }
  100% {
    opacity: 0;
    transform: translateY(-100%);
  }
}

/* Transitions */
.transitioning-fade {
  animation: fadeTransition 1s ease-in-out;
}

@keyframes fadeTransition {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
}

.transitioning-slide .weather-content {
  animation: slideTransition 0.6s ease-in-out;
}

@keyframes slideTransition {
  0% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(-100%);
    opacity: 0;
  }
  51% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}
